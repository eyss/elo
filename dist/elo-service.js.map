{"version":3,"file":"elo-service.js","sourceRoot":"","sources":["../src/elo-service.ts"],"names":[],"mappings":"AAMA,MAAM,OAAO,UAAU;IACrB,YAAmB,UAAsB,EAAY,QAAgB;QAAlD,eAAU,GAAV,UAAU,CAAY;QAAY,aAAQ,GAAR,QAAQ,CAAQ;IAAG,CAAC;IAElE,uBAAuB,CAAC,MAAwB;QAGrD,OAAO,IAAI,CAAC,QAAQ,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;IAC9D,CAAC;IAEM,qBAAqB,CAAC,MAAwB;QAGnD,OAAO,IAAI,CAAC,QAAQ,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC;IAC5D,CAAC;IAED,mCAAmC;IAC5B,YAAY;QACjB,OAAO,IAAI,CAAC,QAAQ,CAClB,gDAAgD,EAChD,IAAI,CACL,CAAC;IACJ,CAAC;IAED,qCAAqC;IAC9B,eAAe,CAAC,WAA2B;QAChD,OAAO,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EAAE,WAAW,CAAC,CAAC;IAC5D,CAAC;IAEO,QAAQ,CAAC,MAAc,EAAE,OAAY;QAC3C,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;IAClE,CAAC;CACF","sourcesContent":["import { AgentPubKeyB64, EntryHashB64 } from '@holochain-open-dev/core-types';\nimport { CellClient } from '@holochain-open-dev/cell-client';\nimport { HoloHashed } from '@holochain/conductor-api';\n\nimport { GameResult } from './types';\n\nexport class EloService {\n  constructor(public cellClient: CellClient, protected zomeName: string) {}\n\n  public getGameResultsForAgents(agents: AgentPubKeyB64[]): Promise<{\n    [key: string]: Array<[HoloHashed<any>, GameResult]>;\n  }> {\n    return this.callZome('get_game_results_for_agents', agents);\n  }\n\n  public getEloRatingForAgents(agents: AgentPubKeyB64[]): Promise<{\n    [key: string]: number;\n  }> {\n    return this.callZome('get_elo_rating_for_agents', agents);\n  }\n\n  // TODO: remove when schedule lands\n  public resolveFlags(): Promise<void> {\n    return this.callZome(\n      'scheduled_try_resolve_unpublished_game_results',\n      null\n    );\n  }\n\n  // TODO: remove when postcommit lands\n  public linkGameResults(entryHashes: EntryHashB64[]): Promise<void> {\n    return this.callZome('link_my_game_results', entryHashes);\n  }\n\n  private callZome(fnName: string, payload: any): Promise<any> {\n    return this.cellClient.callZome(this.zomeName, fnName, payload);\n  }\n}\n"]}