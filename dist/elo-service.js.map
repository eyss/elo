{"version":3,"file":"elo-service.js","sourceRoot":"","sources":["../src/elo-service.ts"],"names":[],"mappings":"AAMA,MAAM,OAAO,UAAU;IACrB,YAAmB,UAAsB,EAAY,QAAgB;QAAlD,eAAU,GAAV,UAAU,CAAY;QAAY,aAAQ,GAAR,QAAQ,CAAQ;IAAG,CAAC;IAElE,uBAAuB,CAC5B,MAAwB;QAExB,OAAO,IAAI,CAAC,QAAQ,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;IAC9D,CAAC;IAEM,qBAAqB,CAC1B,MAAwB;QAExB,OAAO,IAAI,CAAC,QAAQ,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC;IAC5D,CAAC;IAEM,kBAAkB,CACvB,OAA2B,EAC3B,UAAkB;QAElB,OAAO,IAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE;YAC5C,OAAO;YACP,UAAU;SACX,CAAC,CAAC;IACL,CAAC;IAED,mCAAmC;IAC5B,YAAY;QACjB,OAAO,IAAI,CAAC,QAAQ,CAClB,gDAAgD,EAChD,IAAI,CACL,CAAC;IACJ,CAAC;IAEO,QAAQ,CAAC,MAAc,EAAE,OAAY;QAC3C,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;IAClE,CAAC;CACF","sourcesContent":["import { AgentPubKeyB64, Dictionary } from '@holochain-open-dev/core-types';\nimport { CellClient } from '@holochain-open-dev/cell-client';\nimport { HoloHashed } from '@holochain/client';\n\nimport { EloRanking, GameResult } from './types';\n\nexport class EloService {\n  constructor(public cellClient: CellClient, protected zomeName: string) {}\n\n  public getGameResultsForAgents(\n    agents: AgentPubKeyB64[]\n  ): Promise<Dictionary<Array<[HoloHashed<any>, GameResult]>>> {\n    return this.callZome('get_game_results_for_agents', agents);\n  }\n\n  public getEloRatingForAgents(\n    agents: AgentPubKeyB64[]\n  ): Promise<Dictionary<number>> {\n    return this.callZome('get_elo_rating_for_agents', agents);\n  }\n\n  public getEloRankingChunk(\n    fromElo: number | undefined,\n    agentCount: number\n  ): Promise<EloRanking> {\n    return this.callZome('get_elo_ranking_chunk', {\n      fromElo,\n      agentCount,\n    });\n  }\n\n  // TODO: remove when schedule lands\n  public resolveFlags(): Promise<void> {\n    return this.callZome(\n      'scheduled_try_resolve_unpublished_game_results',\n      null\n    );\n  }\n\n  private callZome(fnName: string, payload: any): Promise<any> {\n    return this.cellClient.callZome(this.zomeName, fnName, payload);\n  }\n}\n"]}